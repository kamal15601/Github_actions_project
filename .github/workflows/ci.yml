name: CI Pipeline

on:
  workflow_dispatch:   # this one you run manually

jobs:
  prepare:
    runs-on: ubuntu-latest
    permissions:
      id-token: write   # required for OIDC
      contents: read
    steps:
      - uses: actions/checkout@v4
      - name: Download JAR artifacts
        uses: actions/download-artifact@v4
        with:
          name: app-jar
          path: app

  docker:
    uses: ./.github/workflows/docker.yml   # ðŸ‘ˆ call reusable workflow
    needs: prepare
    with:
      image_tag: latest
